---
version: "3"

vars:
  CONTEXT: "home"

tasks:

  compose:ingress:
    desc: Docker container control
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.dec.env -f {{.DOCKER_DIR}}/ingress/*.yaml {{.CLI_ARGS}}"

  compose:jellyfin:
    desc: Docker container control
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.dec.env -f {{.DOCKER_DIR}}/jellyfin/*.yaml {{.CLI_ARGS}}"

  compose:comics:
    desc: Docker container control
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.dec.env --project-directory {{.DOCKER_DIR}}/comics {{.CLI_ARGS}}"

  compose:media:
    desc: Docker container control
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.dec.env --project-directory {{.DOCKER_DIR}}/media {{.CLI_ARGS}}"
