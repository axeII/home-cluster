---
version: "3"

vars:
  CONTEXT: "home"

tasks:

  container:status:
    desc: Status of docker container
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.env -f {{.DOCKER_DIR}}/{{.CLI_ARGS}}.yaml ps"

  container:logs:
    desc: Logging of docker container
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.env -f {{.DOCKER_DIR}}/{{.CLI_ARGS}}.yaml logs"

  container:start:
    desc: Start the dcoker continer
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.env -f {{.DOCKER_DIR}}/{{.CLI_ARGS}}.yaml up -d --force-recreate"

  container:stop:
    desc: Stop the docker container
    dir: provision/docker
    cmds:
      - "docker-compose --context {{.CONTEXT}} --env-file {{.DOCKER_DIR}}/.sops.env -f {{.DOCKER_DIR}}/{{.CLI_ARGS}}.yaml down"
