---
version: "3"

tasks:

  cloudflare:init:
    desc: Initialize terraform
    dir: provision/terraform/cloudflare
    cmds:
      - "terraform init"

  cloudflare:plan:
    desc: Prepare all the k8s nodes for running k3s
    dir: provision/terraform/cloudflare
    cmds:
      - "terraform plan"

  cloudflare:apply:
    desc: Prepare all the k8s nodes for running k3s
    dir: provision/terraform/cloudflare
    cmds:
      - "terraform apply"


  infrastructure:init:
    desc: Initialize terraform
    dir: provision/terraform/infrastructure
    cmds:
      - "terraform init"

  infrastructure:plan:
    desc: Prepare all the k8s nodes for running k3s
    dir: provision/terraform/infrastructure
    cmds:
      - "terraform plan"

  infrastructure:apply:
    desc: Prepare all the k8s nodes for running k3s
    dir: provision/terraform/infrastructure
    cmds:
      - "terraform apply"

  infrastructure:destroy:
    desc: Prepare all the k8s nodes for running k3s
    dir: provision/terraform/infrastructure
    cmds:
      - "terraform destroy"

  pihole:init:
    desc: Initialize terraform
    dir: provision/terraform/pihole
    cmds:
      - "terraform init"

  pihole:plan:
    desc: Prepare all the k8s nodes for running k3s
    dir: provision/terraform/pihole
    cmds:
      - "terraform plan"

  pihole:apply:
    desc: Prepare all the k8s nodes for running k3s
    dir: provision/terraform/pihole
    cmds:
      - "terraform apply"
