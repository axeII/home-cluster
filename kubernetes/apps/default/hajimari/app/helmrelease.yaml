---
apiVersion: helm.toolkit.fluxcd.io/v2beta1
kind: HelmRelease
metadata:
  name: hajimari
  namespace: default
spec:
  interval: 5m
  chart:
    spec:
      chart: hajimari
      version: 2.0.2
      sourceRef:
        kind: HelmRepository
        name: hajimari
        namespace: flux-system
      interval: 5m
  install:
    createNamespace: true
    remediation:
      retries: 3
  upgrade:
    remediation:
      retries: 3
  values:
    image:
      repository: ghcr.io/toboshii/hajimari
      tag: v0.3.1
    hajimari:
      defaultEnable: true
      namespaceSelector:
        matchNames:
          - default
          - longhorn-system
          - media
          - networking
          - kube-system
          - monitoring
          - flux-system
          - external
      name: "Ales"
      defaultSearchProvider: YouTube
      searchProviders:
        - name: YouTube
          token: 'y'
          icon: simple-icons:youtube
          searchUrl: https://www.youtube.com/results?search_query={query}
          url: https://www.youtube.com
      customApps:
        - group: monitoring
          apps:
            - name: Status
              url: "https://status.${SECRET_DOMAIN}"
              icon: access-point
      globalBookmarks:
        - group: Admin
          bookmarks:
            - name: Midjourney
              url: "https://www.midjourney.com/app/"
            - name: Unifi
              url: "https://unifi.ui.com/consoles"
            - name: "NextDNS"
              url: "https://my.nextdns.io/"
            - name: "Tailscale"
              url: "https://login.tailscale.com/admin/machines"
            - name: "SMS Manager"
              url: "https://app.smsmanager.com"
        - group: Daily
          bookmarks:
            - name: k8s-at-home-search
              url: "https://whazor.github.io/k8s-at-home-search/"
            - name: Artifacthub
              url: "https://artifacthub.io/"
            - name: "Loki logs"
              url: "https://grafana.${SECRET_DOMAIN}/explore"
            - name: GitHub
              url: "https://github.com"
            - name: InfoSecNews
              url: "https://allinfosecnews.com"
            - name: "News"
              url: "https://www.newsminimalist.com/"
        - group: DevOps
          bookmarks:
            - name: Home-Ops
              url: "https://github.com/axeII/home-ops"
            - name: TerraformCloud
              url: "https://app.terraform.io/"
            - name: Visual studio
              url: https://my.visualstudio.com"
            - name: Atlantis
              url: "https://www.runatlantis.io/"
            - name: Git-cleaner
              url: "https://rtyley.github.io/bfg-repo-cleaner/"
            - name: K8S Exam simulator
              url: "https://killer.sh/"
            - name: Github-download-folder
              url: "https://download-directory.github.io"
        - group: Fun
          bookmarks:
            - name: Translator
              url: "https://www.deepl.com/translator"
            - name: Manhwa
              url: "https://toonily.com"
            - name: Archive
              url: "https://archive.ph"
            - name: Wallpapers
              url: "https://unsplash.com"
            - name: "Anime"
              url: "https://anichart.net/"
            - name: Science
              url: "https://nhentai.net"
            - name: Diving-sites
              url: "https://www.padi.com/dive-sites"
        - group: Reddit
          bookmarks:
            - name: "/r/NonCredibleDefense"
              url: "https://libreddit.${SECRET_DOMAIN}/r/NonCredibleDefense/"
            - name: "/r/selfhosted"
              url: "https://libreddit.${SECRET_DOMAIN}/r/selfhosted/"
            - name: "/r/kubernetes"
              url: "https://libreddit.${SECRET_DOMAIN}/r/kubernetes/"
            - name: "/r/virtualreality"
              url: "https://libreddit.${SECRET_DOMAIN}/r/virtualreality/"
            - name: "/r/MacOS"
              url: "https://libreddit.${SECRET_DOMAIN}/r/MacOS/"
            - name: "/r/ChatGPT"
              url: "https://libreddit.${SECRET_DOMAIN}/r/ChatGPT/"
            - name: "/r/plex"
              url: "https://libreddit.${SECRET_DOMAIN}/r/plex/"
        - group: Tech
          bookmarks:
            - name: Hacker News
              url: "https://news.ycombinator.com/"
            - name: Shodan
              url: "https://shodan.io"
            - name: Intelx
              url: "https://intelx.io/"
            - name: Greynoise
              url: "https://www.greynoise.io/"
            - name: GrayHatWarFare
              url: "https://www.greyhatwarfare.com/"
            - name: GPP Tools
              url: "https://bgp.tools"
            - name: BGP View
              url: "https://bgpview.io"
            - name: "Bookhatrix"
              url: "https://book.hacktricks.xyz"
            - name: "Pentest-tools"
              url: "https://offsec.tools/"
    ingress:
      main:
        enabled: true
        ingressClassName: nginx
        annotations:
          hajimari.io/icon: "weather-sunset"
        hosts:
          - host: "${SECRET_DOMAIN}"
            paths:
              - path: /
                pathType: Prefix
        tls:
          - hosts:
              - "${SECRET_DOMAIN}"
    persistence:
      data:
        enabled: true
        existingClaim: hajimari-config
    podSecurityContext:
      fsGroup: 101
    podAnnotations:
      configmap.reloader.stakater.com/reload: "hajimari-settings"
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        memory: 256Mi
